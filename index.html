<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Investment Simulator</title>
	<link rel="stylesheet" href="css/main.css">	
</head>
<body>
	<div id="container"></div>
<!-- 	<script src="js/lib/react-15.3.0/build/react-with-addons.js"></script>
	<script src="js/lib/react-15.3.0/build/react-dom.js"></script>
	<script src="js/lib/react-15.3.0/build/react-dom-server.js"></script>
 -->	<script src="https://npmcdn.com/react@15.3.0/dist/react.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.0/dist/react-dom.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
    <script type="text/babel">

		var InvestmentRow = React.createClass({
			render: function() {
				var name = this.props.investment.name;
				var price = this.props.investment.askPrice;
				var quantity = this.props.investment.quantity;
				return (
					<tr className="currentPortfolioData">
						<td>{name}</td>
						<td>{quantity}</td>
						<td>{price}</td>
						<input className="currentPortfolioData" type="button" value="View Stock"></input>
					</tr>
				);
			}
		});

		var InvestmentTable = React.createClass({
			render: function() {
				var rows = [];
				this.props.investments.forEach(function(investment) {
					rows.push(<InvestmentRow investment={investment} key = {investment.name} />);
				});
				return (
					<table>
						<thead>
							<th className="currentPortfolioHeader">Company</th>
							<th className="currentPortfolioHeader">Quantity</th>
							<th className="currentPortfolioHeader">Price Paid</th>
						</thead>
						<tbody>{rows}</tbody>
					</table>
				);
			}
		});

		var CurrentPortfolioRow = React.createClass({
			render: function() {
				var cash = 100000;
				return (
					<div>
						<h3 style={{float: "left"}}>Current Portfolio</h3>
						<h3 style={{float: "right"}}>Cash: {cash}</h3>
					</div>
				);
			}
		});

		var InvestmentPortfolioTable = React.createClass({
			render: function() {
				return (
					<table className="portfolio">
						<thead>
							<CurrentPortfolioRow />
						</thead>
						<InvestmentTable investments={this.props.investments} />
					</table>
				);
			}
		});

		var TransactionBar = React.createClass({
			render: function() {
				return(
					<tr className="currentStockInput">
						<td>
							<input value="" placeholder="Quantity"></input>
						</td>
						<td>
							<input type="button" value="Buy"></input>
						</td>
						<td>
							<input type="button" value="Sell"></input>
						</td>
					</tr>
				);
			}
		});

		var CurrentPricesTable = React.createClass({
			render: function() {
				var bid = this.props.investments[1].bidPrice;
				var ask = this.props.investments[1].askPrice;
				return (
					<tbody>
						<tr>
							<th className="currentStockHeader">Bid</th>
							<th className="currentStockHeader">Ask</th>
						</tr>
						<tr>
							<td className="currentStockData">{bid}</td>
							<td>{ask}</td>
						</tr>
					</tbody>
				);
			}
		});

		var CurrentStockTable = React.createClass({
			getInitialState: function() {
				return {
					stockName: '',
					symbol: '',
					ask: 0,
					bid: 0
				};
			},
			handleSymbolSubmit: function(stockSymbol) {
				var currentStock = this.state.data
				this.setState({data: currentStock});
				$.ajax({
					url: this.props.url,
					dataType: 'json',
					type: 'GET',
					data: stockSymbol,
					success: function(result) {
						console.log(result);
						var stockData = result[0];
						this.setState({
							stockName: stockData.name,
							symbol: stockSymbol,
							ask: stockData.askPrice,
							bid: stockData.bidPrice
						});
					}.bind(this),
					error: function(xhr, status, err) {
						console.error(this.props.url, status, err.toString());
					}.bind(this)
				});
			},
			componentDidMount: function() {
				this.getInitialState();
			}, 
			render: function() {
				return (
					<table className= "currentStock">
						<thead>
							<tr>{this.state.stockName}</tr>
							<tr>{this.state.symbol}</tr>
						</thead>
						<tbody>
							<tr>
								<th>Bid</th>
								<th>Ask</th>
							</tr>
							<tr>
								<td>
									{this.state.bid}
								</td>
								<td>
									{this.state.ask}
								</td>
							</tr>
							<TransactionBar />
						</tbody>
					</table>
				);
			}
		});

		var SearchBar = React.createClass({
			render: function() {
				return (
					<div>
						<h1 style={{float: "left"}}>Simple Investment Simulator</h1>
						<input value="Lookup" type="button" className="symbolInput"></input>
						<input type="search" value="" placeholder="Enter Symbol" className="symbolInput"></input>
					</div>
				);
			}
		});

		var SearchableInvestmentTable = React.createClass({
			render: function() {
				return (
					<div>
						<SearchBar />
						<CurrentStockTable url="http://data.benzinga.com/rest/richquoteDelayed?symbols=" />
						<InvestmentPortfolioTable investments={INVESTMENTS} />
					</div>
				);
			}
		});

		var INVESTMENTS = [
			{
			    name : "Ford Motor",
			    symbol: "F",
			    bidPrice : 12.19,
			    askPrice : 12.23,
			    quantity : 400
			},
			{
				name : "General Electric",
				symbol: "GE",
				bidPrice : 31.23,
				askPrice: 31.27,
				quantity: 50
			},
			{
				name: "Johnson and Johnson",
				symbol: "JNJ",
				bidPrice: 124.02,
				askPrice: 124.49,
				quantity: 100
			}
		];

    	ReactDOM.render(
    		<SearchableInvestmentTable investments={INVESTMENTS} />,
			document.getElementById('container')
    	);
    </script>
	<!-- <script src="js/lib/jquery-3.1.0.min.js"></script> -->
	<!-- <script type="text/babel" src="js/app.js"></script> -->
</body>
</html>

<!-- First commit -->